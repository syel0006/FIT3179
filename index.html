<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Australia Migration Dashboard</title>

  <!-- Vega Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background-color: #f1e7cf;
      color: #222;
    }

    h1 {
      text-align: center;
      font-size: 2.8rem;
      margin: 50px 0 20px;
      color: #01432e;
    }

    h2 {
      font-size: 1.5rem;
      color: #01432e;
      margin-bottom: 10px;
    }

    /* Intro */
    #intro-section {
      display: block !important;
      text-align: center;
      padding: 40px 8%;
      background-color: #f1e7cf;
    }
    #intro-section h1, #intro-section p { color: #01432e; }
    #intro-section h1 {
      font-size: 2.8rem;
      font-weight: bold;
      margin-bottom: 5px;
      margin-top: 10px;
    }
    #intro-section p {
      font-size: 1rem;   /* fix missing unit */
      max-width: 900px;
      margin: 0 auto;
    }

    /* Sections */
    section {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px 8%;
      gap: 60px;
    }
    section:nth-child(odd)  { background-color: #f1e7cf; }
    section:nth-child(even) { background-color: #ebdec0; flex-direction: row-reverse; }

    /* Visualization card */
    .vis-container {
      flex: 1 1 640px;   /* can grow + shrink */
      min-width: 0;      /* CRUCIAL so it can actually shrink */
      width: 100%;
      max-width: 900px;  /* optional cap */
      border-radius: 16px;
      overflow: hidden;  /* crop anything rogue */
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      background: white;
      padding: 10px;
    }

    .description {
      flex: 1 1 40%;
      max-width: 520px;
      min-width: 0;      /* prevent text from forcing overflow */
    }

    .note-warning {
      color: #b30000;
      font-size: 12px;
      font-style: italic;
      margin-top: 6px;
    }

    footer {
      background-color: #01432e;
      color: white;
      padding: 40px 10%;
    }
    footer p { margin: 6px 0; color: white; }

    /* Make embeds respect the card width */
    .vega-embed { width: 100% !important; max-width: 100%; }
    .vega-embed > * { max-width: 100%; }
    #mapVis, #barVis, #areaVis, #lineVis { width: 100%; } /* explicit for container width */

    /* Responsive */
    @media (max-width: 1100px) {
      section { flex-direction: column; gap: 24px; }
      .vis-container, .description { flex: 1 1 auto; width: 100%; max-width: none; }
    }
  </style>
</head>

<body>
  <!-- Intro and Heading-->
  <section id="intro-section">
    <h1>Migration Visualisations Dashboard</h1>
    <p>
      This Visualisation Dashboard provides an interactive exploration of population change in Australia,
      focusing on overseas migration, visa patterns, and state-by-state growth. It highlights
      how migration trends have shifted over time, especially before, during, and after
      the COVID-19 pandemic, revealing differences in how each state contributes to
      Australia’s overall demographic change.
    </p>
  </section>

  <!-- Map -->
  <section>
    <div class="vis-container"><div id="mapVis"></div></div>
    <div class="description">
      <h2>Migration Arrivals by State</h2>
      <p>This visualisation explores how overseas migration contributes to population change across Australia at the state level for a selected year. The map reveals strong east-coast dominance, particularly in New South Wales, Victoria, and Queensland—where most international arrivals settle due to major job markets, education hubs, and established migrant communities.
        The filter can be used to change the data to a different year's data and can help compare the response of migration before and after COVID-19.
      </p>
      <p class="note-warning">⚠ No data available between 2020–22 due to COVID border restrictions.</p>
    </div>
  </section>

  <!-- Stacked Bar Chart -->
  <section>
    <div class="vis-container"><div id="barVis"></div></div>
    <div class="description">
      <h2>Population Growth Drivers by State (2025)</h2>
      <p>This stacked bar chart highlights whether population growth in each state is driven more by natural increase, interstate migration, or overseas migration.
        This chart highlights the high contribution of Overseas migration to the increase in population for every state in Australia. 
      </p>
    </div>
  </section>

  <!-- Stacked Area Chart -->
  <section>
    <div class="vis-container"><div id="areaVis"></div></div>
    <div class="description">
      <h2>Visa Category Trends Over Time</h2>
      <p>This stacked area chart shows how different visa categories contributed to migration flows over the years, including the major decline in temporary visas following COVID-19 restrictions.
        With this chart we can clearly see that there was an immense decrease in migrant arrivals in 2020-21, due to COVID-19 and border closures. 
      </p>
    </div>
  </section>

  <!-- Line graph -->
  <section>
    <div class="vis-container"><div id="lineVis"></div></div>
    <div class="description">
      <h2>Line graph</h2>
      <p>This chart highlights how Australia’s migration program has shifted over time across different visa streams. The dramatic drop in 2020–21 reflects COVID-19 border closures, followed by a strong rebound as restrictions lifted.
        Overall, we can see that migration trends are shaped by both economic needs and global disruptions, with skilled migration continuing to drive Australia’s long-term population strategy.</p>
    </div>
  </section>

  <footer>
    <p><strong>Author:</strong> Sanika Yelane </p>
    <p><strong>Data Sources:</strong>
      <ul>
        <li>Australian Bureau of Statistics</li>
        <li>Custom GitHub datasets</li>
        <li>Department of Home Affairs: 2023-24 Migration Program Report</li>
        <li>Data.gov.au: Historical migration statistics</li>
      </ul>
    </p>
    <p><strong>Tools used:</strong> mapShaper, Vegalite, VS Code, HTML </p>
  </footer>

  <!-- EMBED CHARTS -->
  <script type="text/javascript">
    const opts = { actions: false }; // keep simple; width handled by spec + CSS
    vegaEmbed('#mapVis', "js/map.json", opts).catch(console.error);
    vegaEmbed('#barVis', "js/barchart.json", opts).catch(console.error);
    vegaEmbed('#areaVis', "js/stacked_areachart.json", opts).catch(console.error);
    vegaEmbed('#lineVis', "js/graph1.json", opts).catch(console.error);
  </script>
</body>
</html>
